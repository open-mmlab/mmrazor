# 如何适配trace新模型

首先我们提供一个单元测试：tests/test_core/test_graph/test_prune_tracer_model.py。
在这个文件中，我们自动的对模型进行测试，判断是否能够顺利通过PruneTracer。

## 添加新模型

所有定义的新模型在tests/data/tracer_passed_models.py中定义，当我们需要添加新的repo时，我们需要实现相应的ModelLibrary。再将ModelLibrary放在tracer_passed_models中。

模型定义完成后，我们的单元测试便可对这些模型进行测试。

## 简单的模型适配

当我们发现一些模型无法通过tracer时，我们有一些简单的适配方法。

where to config prune tracer

- How to config PruneTracer using hard code
  - fxtracer
    - [default_demo_inputs.py](/mmrazor/models/task_modules/demo_inputs/default_demo_inputs.py)
    - leaf module
      - [prune_tracer.py](/mmrazor/models/task_modules/tracer/prune_tracer.py)::default_leaf_modules
  - ChannelNode
    - [channel_nodes.py](./mmrazor/structures/graph/channel_nodes.py)
  - DynamicOp
    [dynamic_conv.py](/mmrazor/models/architectures/dynamic_ops/bricks/dynamic_conv.py)

## 文档

./docs/en/user_guides/pruning_user_guide.md
